<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simple React App</title>

  <link rel="stylesheet" href="react_main.css">

</head>
<body>

<div id="root"></div>


<script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
<script crossorigin src="https://unpkg.com/babel-standalone@6.26.0/babel.min.js"></script>

<!-- REACT COMPONENTS -->
<script type="text/babel" src="react_intro.js"></script>
<script type="text/babel" src="react_step1.js"></script>

<!-- FUNCTIONAL SCRIPTS -->
<script src="face-api.min.js"></script>
<script src="spotify_auth.js"></script>
<script src="webcam.js"></script>




<script type="text/babel">


  // Your React code goes here


  const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get("code") && !localStorage.getItem("access_token")) { //Back from spotify
        localStorage.setItem("curState",1)
        let code = urlParams.get("code");
        let codeVerifier = localStorage.getItem('code_verifier');
        getToken(code).then((value) => {
            window.location.href = "https://www.jamesunderwood.net/facemusic/react_main.html";
        });
    }








  var curState = localStorage.getItem("curState");
var toDisplay = <p></p>;

  if (curState == 0) {
    toDisplay = (
      <React.Fragment>      <Reactintro />
      <Reactstep1 />
      </React.Fragment>
      );
  } else {
    toDisplay = <p></p>;
  }





  const App = () => {
    return (
      <div>
        // <Reactintro />
        <div id="postIntro">
            { toDisplay }
        </div>
      </div>
    );
  };

  ReactDOM.render(<App />, document.getElementById('root'));




  
</script>


<script>

let accessToken = localStorage.getItem("access_token");


</script>

</body>
</html>
