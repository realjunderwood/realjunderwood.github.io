<!DOCTYPE html>
<html>
<head>
	<title>Convert Textarea Content to JSON Object</title>
	<style>
		body {
			font-family: Arial, sans-serif;
			text-align: center;
		}
		
		h1 {
			margin-top: 50px;
		}
		
		textarea {
			width: 25%;
			height: 200px;
			margin-top: 20px;
			padding: 10px;
			font-size: 16px;
			border-radius: 5px;
			border: none;
			box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.1);
		}
		
		button {
			padding: 10px 20px;
			font-size: 16px;
			border-radius: 5px;
			border: none;
			background-color: #4285f4;
			color: white;
			cursor: pointer;
			box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.1);
			margin-top: 20px;
		}
		
		button:hover {
			background-color: #3367d6;
		}
	</style>
</head>
<body>
	<h1>Convert Textarea Content to JSON Object</h1>
	
	
	<input placeholder="collegename" style="width:200px;height:50px" id="colnameInput">
	<br>
	
	<textarea id="textarea"></textarea>
	<br>
	<button onclick="convertToJSON()">Push to masterDB</button>
	<br>
	<h3 id="working" style="display:none;color:red">Working...</h3>
	
	
<div style="display:inline-block;background:gray">
		<h3>masterDB live</h3>
		<pre id="masterDB"></pre>
		</div>
	
	
	
	
	<script>
		
		
		var masterDB = [];
    var studentsHolding = [];
		

    function convertToJSON() {
	    console.log("working");
	    document.getElementById("working").style.display = "block";
	    
	    studentsHolding.length = 0;
	   
	    var textareaContent = document.getElementById("textarea").value;
	    var jsonObj = JSON.parse(textareaContent);
	    
	    
	    let colName = document.getElementById("colnameInput").value;
	    
	    
"deniedRD" in jsonObj.scattergrams.weightedGpa.act.apps ? studentsHolding.push(...runThrough(colName,"deniedRD",jsonObj)) : void 1;
"deniedEA" in jsonObj.scattergrams.weightedGpa.act.apps ? studentsHolding.push(...runThrough(colName,"deniedEA",jsonObj)) : void 1;
"deniedED" in jsonObj.scattergrams.weightedGpa.act.apps ? studentsHolding.push(...runThrough(colName,"deniedED",jsonObj)) : void 1;
"denied" in jsonObj.scattergrams.weightedGpa.act.apps ? studentsHolding.push(...runThrough(colName,"denied",jsonObj)) : void 1;
"acceptedRD" in jsonObj.scattergrams.weightedGpa.act.apps ? studentsHolding.push(...runThrough(colName,"acceptedRD",jsonObj)) : void 1;
"acceptedEA" in jsonObj.scattergrams.weightedGpa.act.apps ? studentsHolding.push(...runThrough(colName,"acceptedEA",jsonObj)) : void 1;
"acceptedED" in jsonObj.scattergrams.weightedGpa.act.apps ? studentsHolding.push(...runThrough(colName,"acceptedED",jsonObj)) : void 1;
"accepted" in jsonObj.scattergrams.weightedGpa.act.apps ? studentsHolding.push(...runThrough(colName,"accepted",jsonObj)) : void 1;
"waitlistedUnknownEA" in jsonObj.scattergrams.weightedGpa.act.apps ? studentsHolding.push(...runThrough(colName,"waitlistedUnknownEA",jsonObj)) : void 1;
"waitlistedUnknownRD" in jsonObj.scattergrams.weightedGpa.act.apps ? studentsHolding.push(...runThrough(colName,"waitlistedUnknownRD",jsonObj)) : void 1;


	    
	    document.getElementById("working").style.display = "none";
	    console.log(studentsHolding);
	   masterDB.forEach(function(curVal,ind){
		studentsHolding.forEach(function(laVruc,dni){
			if (curVal.ACT == laVruc.ACT && curVal.SAT == laVruc.SAT && curVal.wGPA == laVruc.wGPA) {
			console.log ("duplicate");	
			} else {
			masterDB.push(laVruc);	
			}
			
			
		});
		   
		   
	   });
	    masterDB.push(studentsHolding);
	    console.log("done");
    }
		
		
		
		
		function runThrough(sName,decisionType,obby){
			
			let array1 = obby.scattergrams.weightedGpa.act.apps[decisionType]; 
let array2 = [];
			array1.forEach(function(element){
				
				let toAdd = {ACT: element.actCompositeStudent, wGPA: element.gpa, SAT: element.studentSAT1600Composite, ["decision" + sName]: decisionType};
array2.push(toAdd);
	
});
	return array2;
			
			
			
		}
		setInterval(function(){
		document.getElementById("masterDB").innerHTML = JSON.stringify(masterDB).toString();	
			
		},1000);
		
		
	</script>
</body>
</html>
